<Window x:Class="Cross_FIS_API_1._2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Cross_FIS_API_1._2"
        xmlns:viewModels="clr-namespace:Cross_FIS_API_1._2.ViewModels"
        xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
        mc:Ignorable="d"
        Title="FIS/Cross API Connector"
        Height="Auto" Width="500" SizeToContent="Height">
    <Window.DataContext>
        <viewModels:MainViewModel/>
    </Window.DataContext>
    <StackPanel Margin="10">

        <!-- SLE Connection Section -->
        <GroupBox Header="SLE (Trading Server)" Margin="5">
            <Grid Margin="5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Label Grid.Row="0" Grid.Column="0" Content="IP Address:" VerticalAlignment="Center" Margin="5"/>
                <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding SleIpAddress}" Margin="5"/>

                <Label Grid.Row="0" Grid.Column="2" Content="Port:" VerticalAlignment="Center" Margin="5"/>
                <TextBox Grid.Row="0" Grid.Column="3" Text="{Binding SlePort}" Margin="5"/>

                <Label Grid.Row="1" Grid.Column="0" Content="User:" VerticalAlignment="Center" Margin="5"/>
                <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding SleUser}" Margin="5"/>

                <Label Grid.Row="1" Grid.Column="2" Content="Password:" VerticalAlignment="Center" Margin="5"/>
                <TextBox Grid.Row="1" Grid.Column="3" Text="{Binding SlePassword}" Margin="5"/>

                <Label Grid.Row="2" Grid.Column="0" Content="Node:" VerticalAlignment="Center" Margin="5"/>
                <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding SleNode}" Margin="5"/>

                <Label Grid.Row="2" Grid.Column="2" Content="Subnode:" VerticalAlignment="Center" Margin="5"/>
                <TextBox Grid.Row="2" Grid.Column="3" Text="{Binding SleSubnode}" Margin="5"/>
                
                <StackPanel Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="4" Orientation="Horizontal" HorizontalAlignment="Center" Margin="5">
                    <Button Content="Connect" Command="{Binding ConnectSleCommand}" Margin="5" Padding="10,5"/>
                    <Button Content="Disconnect" Command="{Binding DisconnectSleCommand}" Margin="5" Padding="10,5"/>
                </StackPanel>
            </Grid>
        </GroupBox>

        <!-- MDS Connection Section -->
        <GroupBox Header="MDS (Market Data Server)" Margin="5">
            <DockPanel>
                <StackPanel DockPanel.Dock="Top" Margin="5">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Label Grid.Row="0" Grid.Column="0" Content="IP Address:" VerticalAlignment="Center" Margin="5"/>
                        <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding MdsIpAddress}" Margin="5"/>

                        <Label Grid.Row="0" Grid.Column="2" Content="Port:" VerticalAlignment="Center" Margin="5"/>
                        <TextBox Grid.Row="0" Grid.Column="3" Text="{Binding MdsPort}" Margin="5"/>

                        <Label Grid.Row="1" Grid.Column="0" Content="User:" VerticalAlignment="Center" Margin="5"/>
                        <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding MdsUser}" Margin="5"/>

                        <Label Grid.Row="1" Grid.Column="2" Content="Password:" VerticalAlignment="Center" Margin="5"/>
                        <TextBox Grid.Row="1" Grid.Column="3" Text="{Binding MdsPassword}" Margin="5"/>

                        <Label Grid.Row="2" Grid.Column="0" Content="Node:" VerticalAlignment="Center" Margin="5"/>
                        <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding MdsNode}" Margin="5"/>

                        <Label Grid.Row="2" Grid.Column="2" Content="Subnode:" VerticalAlignment="Center" Margin="5"/>
                        <TextBox Grid.Row="2" Grid.Column="3" Text="{Binding MdsSubnode}" Margin="5"/>
                    </Grid>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="5">
                        <Button Content="Connect" Command="{Binding ConnectMdsCommand}" Margin="5" Padding="10,5"/>
                        <Button Content="Disconnect" Command="{Binding DisconnectMdsCommand}" Margin="5" Padding="10,5"/>
                        <Button Content="Fetch Instruments" Command="{Binding FetchInstrumentsCommand}" Margin="5" Padding="10,5"/>
                    </StackPanel>
                </StackPanel>

                <DataGrid ItemsSource="{Binding Instruments}" 
                          SelectedItem="{Binding SelectedInstrument}"
                          AutoGenerateColumns="False" IsReadOnly="True" MaxHeight="300">
                    <b:Interaction.Triggers>
                        <b:EventTrigger EventName="MouseDoubleClick">
                            <b:InvokeCommandAction Command="{Binding OpenInstrumentDetailsCommand}"/>
                        </b:EventTrigger>
                    </b:Interaction.Triggers>
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="GLID+Symbol" Binding="{Binding GlidAndSymbol}" Width="*"/>
                        <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="2*"/>
                        <DataGridTextColumn Header="ISIN" Binding="{Binding ISIN}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </DockPanel>
        </GroupBox>

        

        <StatusBar Margin="5">
            <StatusBarItem>
                <TextBlock Text="SLE Status:" FontWeight="Bold"/>
            </StatusBarItem>
            <StatusBarItem>
                <TextBlock Text="{Binding SleStatusMessage}"/>
            </StatusBarItem>
            <Separator/>
            <StatusBarItem>
                <TextBlock Text="MDS Status:" FontWeight="Bold"/>
            </StatusBarItem>
            <StatusBarItem>
                <TextBlock Text="{Binding MdsStatusMessage}"/>
            </StatusBarItem>
        </StatusBar>

    </StackPanel>
</Window>
